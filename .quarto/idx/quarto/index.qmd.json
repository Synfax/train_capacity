{"title":"combined_scores <- original_values %>%","markdown":{"yaml":{"format":{"closeread-html":{"code-fold":false,"toc":true,"toc-location":"left","toc-expand":true,"toc-depth":3,"grid":{"body-width":"900px"},"theme":"zephr","page-layout":"article","remove-header-space":false,"css":["index.css","nav_fixes.css"],"image":"index_images/main.png","cr-section":{"layout":"overlay-left"}}}},"headingText":"combined_scores <- original_values %>%","containsRefs":false,"markdown":"\n\n```{=html}\n<script>\nfunction modifyMainDiv() {\n  console.log('blue');\n  const mainDiv = document.getElementById('quarto-document-content');\n  if (mainDiv) {\n    console.log('found');\n    mainDiv.classList.remove('column-body');\n    mainDiv.classList.add('column-page-right');\n    // You can add more class modifications here\n  }\n}\n\n// This function will be called by the script in the Quarto document\nmodifyMainDiv();\n</script>\n```\n```{r, message=FALSE, warning=FALSE}\n\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(leaflet)\nlibrary(shiny)\nlibrary(htmlwidgets)\nlibrary(plotly)\nlibrary(reactablefmtr)\n\nlocations <- readRDS('../r_objects/locations.Rdata')\nsource('../r/constants.r')\n\nsource('../r/theme.r')\nsource('../r/graphs.r')\nsource('../r/prepare_index_page.r')\nsource('../r/transform.r')\nsource('../r/existing_upzoned_stations.r')\n\ntransformed_scores <- readRDS('../r_objects/transformed_scores.Rdata')\noriginal_values <- readRDS('../r_objects/station_rankings.Rdata')\n\n#   left_join(transformed_scores, by = 'station') %>%\n#   arrange(desc(score)) %>%\n#   slice_head(n = 10) %>%\n#   mutate(across(where(is.numeric), .fns = function(x) round(x, 2) )) %>%\n#   mutate(rank = row_number())\n\n\ntransformed_scores <- readRDS('../r_objects/transformed_scores.Rdata') %>%\n  remove_null_weighted_cols() %>%\n  as.data.frame() %>%\n  mutate(across(where(is.numeric), .fns = function(x) round(x, 2) )) %>%\n  mutate(rank = row_number()) \n\nsan_station <- function(x) {\n  return( str_replace(x, ' ', '_') )\n}\n\n# translations = c(\n#   'grz_nrz_pc' = 'Zoning suitability',\n#   'capacity_delta' = 'Potential new homes',\n#   'average_peak_service_freq' = 'Train frequency',\n#   'average_peak_service_cap' = 'Available train capacity',\n#   'walkability_score' = 'Local services',\n#   'distance' = 'Distance to CBD',\n#   'n_bus_tram' = 'Other transport infrastructure'\n# )\n\n# compact_data_bars <- function(data, fill_color = \"#00bfc4\", inside_color = \"white\", outside_color = \"black\", force_outside = FALSE, ...) {\n#   orig_formatter <- reactablefmtr::data_bars(data, fill_color = fill_color, force_outside = force_outside, ...)\n#   \n#   function(value, index, name) {\n#     bar <- orig_formatter(value, index, name)\n#     script <- sprintf(\"\n#       const b = this.querySelector('.bar-cell');\n#       if (b) {\n#         const t = b.querySelector('span');\n#         if (t) t.style.color = (b.querySelector('.bar').offsetWidth < b.offsetWidth && %s) ? '%s' : '%s';\n#       }\n#     \", !force_outside, inside_color, outside_color)\n#     \n#     tagList(bar, tags$script(HTML(script)))\n#   }\n# }\n\ntranslations <- translations <- gsub(\"\\\\s*\\\\([^)]+\\\\)\", \"\", translations)\n\n  transformed_scores = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    mutate(rank = row_number()) %>%\n    remove_null_weighted_cols() %>%\n    mutate(across(where(is.numeric), ~ round(.x, 2)))\n\nprintScores <- function(r) {\n  \n\n  transformed_scores %>% \n  filter(rank == r) %>%\n  pivot_longer(-station) %>%\n  select(-station) %>%\n  filter(!(name %in% c('score','rank'))) %>%\n  mutate(name = translations[name]) %>%\n  reactable(\n            class = \"pageinforeactable\",\n            columns = list(\n              'name' = colDef(name = 'Metric'),\n              'value' = colDef(name = \"Score\",\n                             cell = data_bars(.,\n                                              text_position = 'above',\n                                              fill_color = '#1B5E20',\n                                              text_color = 'black',\n                                              background = 'opaque',\n                                              fill_opacity = 1,\n                                              bar_height = 24,\n                                              bold_text = T))\n            )\n            \n            ) %>%\n  return()\n  \n}\n\n```\n\n# The Next 25: Executive Summary\n\n::: column-body\nAs part of Plan for Victoria, the Government has elected to upzone dozens of train stations as part of the Activity Centres Program. This is a sound policy. Melbourne has bountiful infrastructure and the ability to accommodate many more Melburnians in the places where they want to live. We have outlined the impetus for transit-oriented planning reform in our previous reports including [Melbourne's Missing Middle](https://www.yimby.melbourne/missing-middle) and [Missing Middle Housing Targets](https://targets.yimby.melbourne/).\n\n::: column-margin\nSidenote: A total of 60 Activity Centres have been announced. Of the initial 10, seven are focused around train stations. Of the 25 announced in October 2024, one tram stop (Toorak Village) was included. The total number of train stations confirmed for upzoning to date, therefore, is 31. Should the yet-to-be-announced Activity Centres all be train stations, as this report assumes, that would bring the total up to 56.\n:::\n\nHere, we build upon previous work to answer a simple question: across Melbourne's transport network, which additional 25 train stations should be prioritised for inclusion in the Activity Centre Program?\n\n*See the full report [here](report.html \"Full Report\").*\n:::\n\n<!-- ### Methodology -->\n\n<!-- \\ -->\n\n<!-- For each train station, metrics are calculated on: -->\n\n<!-- -   Zoning suitability (% land area) -->\n\n<!-- -   Potential number of new homes (# homes) -->\n\n<!-- -   Train service frequency in peak (trains per hour) -->\n\n<!-- -   Spare train line capacity in peak (# passengers) -->\n\n<!-- -   Local amenities nearby (composite index) -->\n\n<!-- -   Proximity to CBD (metres) -->\n\n<!-- -   Bus and tram frequencies (services per hour) -->\n\n<!-- Each metric calculated uses different units of measurement, and need to be transformed into comparable units so that a single score can be generated for each train station. -->\n\n<!-- This report uses xmin-xmax scaling, which transforms each 'raw' metric into a value between zero and one. If a station receives a 'transformed' score of zero, it corresponds to the lowest value out of all stations. Likewise, a value of one represents the best out of all stations in Melbourne. -->\n\n<!-- These 'transformed' scores are summed together to produce a final score for each station. -->\n\n<!-- ::: callout-note -->\n\n<!-- There are some restrictions placed on final rankings: -->\n\n<!-- -   City loop stations are excluded as they can't be upzoned further. -->\n\n<!-- -   Edge transfer stations (North Melbourne, South Yarra, Richmond) were excluded due to extreme outliers in the data impacting the transformation process. -->\n\n<!-- -   Stations further than 25km of Flinders Street are excluded as they are generally economically unfeasible to upzone. -->\n\n<!-- The full methodology is contained in the full report. -->\n\n<!-- \\ -->\n\n<!-- **`r transformed_scores %>% filter(rank == 1) %>% pull(station)`** was the best station out of those considered in this project. -->\n\n<!-- There is a searchable table and interactive map at the foot of this document to find your own station and see where it ranks. -->\n\n<!-- A chart below shows the scores of the 10 highest ranked stations, with an interactive map underneath to show the spatial distribution. -->\n\n::: column-body\n<!-- ## Map -->\n\n::: interactive-map\n```{r}\n\n\n#| fig-height: 4\njs_code <- \"\nfunction(el, x, data) {\n\n  var map = this;\n\n  function updateLabelVisibility() {\n   \n    var currentZoom = map.getZoom();\n   \n    var showLabelsZoomLevel = 13;\n\n    var labels = document.getElementsByClassName('top-25-labels');\n   \n    for (var i = 0; i < labels.length; i++) {\n      if (currentZoom >= showLabelsZoomLevel) {\n        labels[i].style.display = 'block';\n      } else {\n        labels[i].style.display = 'none';\n      }\n    }\n  }\n  \n\n\n  // Ensure the map is fully loaded before adding the event listener\n  map.whenReady(function() {\n  \n\n    map.on('zoomend', function() {\n  \n      updateLabelVisibility();\n    });\n    \n    // Initial call to set correct visibility\n    updateLabelVisibility();\n  });\n}\n\n\"\n\n\nm <- prepare_index(returnTopTen = T, topN = 25, fromQuarto = T, font_size_q = '8pt', h = '600px', w = '100%', fillC = \"white\", ringC = \"#283696\") %>%\n  htmlwidgets::onRender(js_code)\n\nm\n\n```\n:::\n\n<!-- ## Chart -->\n\n```{r}\n#| fig-height: 8\n\ntemp_graph <- readRDS('../r_objects/transformed_scores.Rdata') %>% \n    as.data.frame() %>%\n    select(station, score) %>%\n    arrange(desc(score)) %>%\n    mutate(score = round(score, 2)) %>%\n    slice_head(n = 25) %>%\n    ggplot(mapping = aes(y = reorder(station, score), x = score, fill = score )) +\n    scale_fill_gradientn(colors = create_green_palette(11)) +\n    geom_col() +\n    ylab(\"Station\") +\n    theme_report() + \n  theme(legend.position = \"none\")\n  \n  ggplotly(temp_graph) %>% plotly::layout(showlegend = F)\n\n```\n\nOf the `r nrow(transformed_scores)` Melbourne stations within 25 kilometres of the CBD and not yet included within the Activity Centre Program, these 25 are the most suitable for upzoning.\n\nEach station in the network has been given a score based on a set of parameters. The higher a station's score, the greater reason there is to upzone around it. Scores range between `r transformed_scores$score[1]` for `r transformed_scores$station[1]` and `r transformed_scores$score[nrow(transformed_scores)]` for `r transformed_scores$station[nrow(transformed_scores)]`.\n\nFor each station, and all land within one kilometre of that station, we measure:\n\n-   The number of trains per hour during peak travel times\n-   The amount of spare train capacity during peak travel times\n-   The frequency of nearby bus and tram services\n-   The proportion of residential land with low-density zoning, excluding heritage overlays\n-   The prevalence and diversity of local amenities such as parks and schools\n-   The station's distance from the CBD\n\nA comprehensive explanation of the report's methodology is available [here](report_shiny.html).\n\n<!-- Note: our rankings exclude SRL Precincts and stations located within the CBD such as List -->\n\n::: {.callout-caution collapse=\"true\"}\n## Excluded Stations and SRL Precincts\n\nWe also exclude SRL precincts and stations in the CBD.\n\nThese are: `r c(other_existing_precincts, city_loop_stations)`\n:::\n\n::: {.column-body}\n\n## Melbourne's three outlier 'Edge Stations'\n \n\nThree outlier stations---North Melbourne, Richmond, and South Yarra---are excluded from our main rankings. These Edge Stations are outliers due to their extremely high rail service frequency, which dwarfs the rest of the dataset.\n\nAs such, we consider these three stations separately. By nature of their serviceability and location, these three inner-city stations are ripe for upzoning.\n\nIf the Government is only going to upzone 50 more stations in total---though we see no reason to stop at 50---we suggest prioritising the Edge Stations and then 22 of the 25 listed above. A full ranking of Melbourne's entire rail network is provided later on this page for reference.\n\n## Results by LGA\n\nThe stations best-suited for upzoning are not equally distributed across Melbourne's local councils. This makes sense: land and infrastructure is also not equally distributed across councils. The model in this report reflects Melbourne as it is: a dynamic, vibrant city, in which some geographic areas are more suitable for upzoning than others.\n\nValuable inner-city land close to services, jobs, and amenities will always score higher when measuring the city as a whole rather than within the arbitrary segments of local government areas. For more on the importance of measuring the entirety of Melbourne, you can read our submission to the Inquiry into Local Government funding and services, and the Abundant Housing Network Australia's submission to the National Urban Policy.\n\nBelow, we chart the distribution of our 25 additional stations suitable for upzoning.\n:::\n\n::: column-body\n```{r}\n\ntop_stations_by_lga(debug =  F) \n\n```\n:::\n\nNext, we take into account the current confirmed stations---those included in the Activity Centre Program pilot and the announced 25---alongside the top 25 additional stations returned by our model.\n\n::: column-body\n```{r}\n\ntop_stations_by_lga(include_existing_25 = T) \n\n```\n:::\n\nThe 56 train stations selected for upzoning represent areas with strong housing targets as calculated through econometric modelling within our [Housing Targets](https://targets.yimby.melbourne/) report, released earlier this year.\n\n![](index_images/targets.png.png)\n\nWhat these models together make clear is that the 56 selected stations are not just in areas suitable for people to live---they are in areas where people want to live. We know this because apartments in many of these areas trade at a premium---indicating a shortfall of supply relative to demand.\n\n## Results by train line\n\nBelow, we once again chart the distribution of the top 25 additional stations suitable for upzoning, followed by the distribution of all 56 stations.\n\n```{r}\n\n\n  station_lines = readRDS('../r_objects/stations_with_lines.Rdata') \n  \n  transformed_scores_ = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    rename(Station_Name = \"station\") %>%\n    arrange(desc(score)) %>%\n    mutate(rank = row_number())\n  \n  score_by_line <- (transformed_scores_ %>%\n    left_join(station_lines, by = 'Station_Name') %>%\n    slice_head(n = 25) %>%\n    select(Station_Name, rank, lines) %>%\n    unnest(lines) %>%\n    count(lines, sort = T) %>%\n    filter(lines != \"Richmond and City Loop\") %>%\n    rename(line = 'lines') %>%\n    left_join(line_groups, by = 'line') %>%\n    ggplot(., mapping = aes(x = reorder(line, -n) , y = n)) +\n    theme_report() +\n    theme(legend.position = 'top') +\n    geom_col(aes(fill = group)) +\n    scale_fill_manual(values = setNames(colours$colour, colours$group)) +\n    guides(x = guide_axis(angle = 45)) +\n    xlab(\"Train Line\") +\n    ylab(paste0(\"Number of stops in top \", 25 )) ) %>%\n    ggplotly() %>%\n    layout(xaxis = list(tickangle = -45)) %>%\n    layout(legend = list(\n      orientation = \"h\",    # horizontal orientation\n      y = 1.1,             # position above plot\n      x = 0.5,             # centered\n      xanchor = \"center\"   # anchor point for centering\n    ))\n  \n  \n  score_by_line\n\n```\n\n```{r}\n\nstation_lines = readRDS('../r_objects/stations_with_lines.Rdata') \n\n  already_upzoned_stations = data.frame(Station_Name = existing_upzoned_stations) %>%\n    filter(Station_Name != \"Toorak Village\")\n  \n  stations_for_lines = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    rename(Station_Name = \"station\") %>%\n    arrange(desc(score)) %>%\n    slice_head(n = 25) %>%\n    select(Station_Name) %>%\n    bind_rows(., already_upzoned_stations)\n    \n  score_by_line <- (stations_for_lines %>%\n    left_join(station_lines, by = 'Station_Name') %>%\n    select(Station_Name, lines) %>%\n    unnest(lines) %>%\n    count(lines, sort = T) %>%\n    filter(lines != \"Richmond and City Loop\") %>%\n    rename(line = 'lines') %>%\n    left_join(line_groups, by = 'line') %>%\n    ggplot(., mapping = aes(x = reorder(line, -n) , y = n)) +\n    theme_report() +\n    theme(legend.position = 'top') +\n    geom_col(aes(fill = group)) +\n    scale_fill_manual(values = setNames(colours$colour, colours$group)) +\n    guides(x = guide_axis(angle = 45)) +\n    xlab(\"Train Line\") +\n    ylab(paste0(\"Number of stops in top 25 + Already Upzoned\")) ) %>%\n    ggplotly() %>%\n    layout(xaxis = list(tickangle = -45)) %>%\n    layout(legend = list(\n      orientation = \"h\",    # horizontal orientation\n      y = 1.1,             # position above plot\n      x = 0.5,             # centered\n      xanchor = \"center\"   # anchor point for centering\n    ))\n  \n  \n  score_by_line\n\n```\n\n## Upzoning into Melbourne's vibrant future\n\nA final point we wish to highlight in this report is that the 56 stations above are by no means an exhaustive list of upzoning options.\n\nOur model indicates no significant difference between the upzoning capacities of stations number 25 and 75. Indeed, there is no reason the Activity Centre Program could not be doubled in scope---from 50 to 100 stations---in the near future.\n\n```{r}\n\n\ntotal_stations <- nrow(transformed_scores)\ntick_positions <- seq(25, total_stations, by = 25)\n\np <- ggplot() +\n  annotate(\"rect\", xmin = 0, xmax = 25, ymin = -0.5, ymax = max(transformed_scores$score) + 0.5,\n              fill = \"#8FC49A\",  alpha = 0.34) +\n  geom_vline(xintercept = 25, linetype = \"dashed\") + \n  geom_point(data = transformed_scores, mapping = aes(y = score, x = rank), fill = \"#283696\", size = 0.9  ) +\n  xlab(\"Station Rank\") +\n  ylab(\"Scores ordered descending\") +\n  scale_x_continuous(\n    breaks = tick_positions,\n    labels = tick_positions,\n    expand = c(0.01, 0)\n  ) +\n  theme_report() +\n  coord_cartesian(ylim = c(0, max(transformed_scores$score)))\n\nggplotly(p)\n\n```\n\n\n\nThis report provides the evidence base required for the Government to confidently scale their planning reform policy ambitions as we move our state forward.\n\nThe great strength of upzoning is that it is low-cost and future-focused. It enables our city to remain dynamic and open. It lets communities grow and change over time, and it breathes life into our streets and the buildings that line them. It champions small business, vibrancy, and dynamism---it reminds us that our city is not a dusty museum, but a place where people come and choose to live.\n\nYou can explore the full network and see how your station scores via the map and table below.\n\n## Searchable Map\n\nPages for each individual train station have also been produced to detail how each performed in the metrics.\n\nThe map below is interactive and clickable. Scroll and find any train station and click the label for further information.\n\n::: column-body\n```{r}\n\n\njs_code <- \"\nfunction(el, x, data) {\n\n    var marker = document.getElementsByClassName('my-labels');\n  for(var i=0; i < marker.length; i++){\n    (function(){\n      console.log('hello');\n      var v = data.win_url[i];\n      marker[i].addEventListener('click', function() { window.open(v);}, false);\n  }()); \n  }\n\n  var map = this;\n  \n  \n  \n  \n\n  function updateLabelVisibility() {\n   \n    var currentZoom = map.getZoom();\n   \n    var showLabelsZoomLevel = 13;\n\n    var labels = document.getElementsByClassName('my-labels');\n   \n    for (var i = 0; i < labels.length; i++) {\n      if (currentZoom >= showLabelsZoomLevel) {\n        labels[i].style.display = 'block';\n      } else {\n        labels[i].style.display = 'none';\n      }\n    }\n  }\n  \n\n\n  // Ensure the map is fully loaded before adding the event listener\n  map.whenReady(function() {\n  \n  \n \n    map.on('zoomend', function() {\n  \n      updateLabelVisibility();\n    });\n    \n    // Initial call to set correct visibility\n    updateLabelVisibility();\n  });\n}\n\n\"\n\ncolours = tribble(\n  ~group, ~ colour,\n  'Sandringham' , \"#F178AF\",\n  'CrossCity' , \"#028430\",\n  'Cran/Pak' , \"#279FD5\",\n  \"Burnley\" , \"#152C6B\",\n  \"Northern\" , \"#FFBE00\",\n  \"Eastern\" , \"#BE1014\",\n  'event' , \"#95979A\"\n)\n\nlines_dissolved <- read_sf('../shapefiles/qgis/final_map.shp') %>%\n  left_join(colours, by = 'group') \n\nvalid_stations <-  readRDS('../r_objects/transformed_scores.Rdata') %>%\n  pull(station)\n\nlocations = locations %>%\n  filter(Station_Name %in% valid_stations) %>%\n  mutate(safe_name = gsub(\"[^a-zA-Z0-9]\", \"_\", Station_Name)) %>%\n  mutate(message = \n           paste0(\n             '<div style = \\\" background-color: black; \\\">',\n             \"<p style = \\\" color: white; text-align:center ; padding: 5px; \\\" >\", Station_Name, '</p>',\n             '</div>'\n             \n           )\n  ) %>%\n  mutate(win_url = paste0('../stations/', safe_name, '.html'))\n\nm <- leaflet(width = '100%', height = '600px') %>%\n  leaflet::setView(lng = 144.9668, lat = -37.8181, zoom = 12) %>%\n  addPolylines(data = lines_dissolved, color = ~colour, opacity = 0.8) %>%\n  addTiles('https://tiles.stadiamaps.com/tiles/stamen_toner_background/{z}/{x}/{y}.png?api_key=090a847c-32a2-4e35-99a9-543ad8f4ecc8', options = tileOptions(opacity = 0.3)) %>%\n  addCircleMarkers(lng = locations$lng, lat=locations$lat, radius = 5, color = 'black', fillColor = 'black', fillOpacity = 1, opacity = 0.7) %>%\n  addLabelOnlyMarkers(lng = locations$lng,\n                      lat = locations$lat,\n                      label = lapply(locations$message, htmltools::HTML),\n                      labelOptions = labelOptions(noHide = T, clickable = T,  className = 'my-labels', direction = 'auto', textOnly = T, textsize = '10pt',\n                                                  style = list(\n                                                    'font-weight' = '800',\n                                                    'text-decoration' = 'underline',\n                                                    'text-decoration-color' = 'white',\n                                                    'margin' = '5px',\n                                                    'letter-spacing' = '0.5px'\n                                                  ))) %>%\n  htmlwidgets::onRender(js_code, data = locations)\n\nm\n\n```\n:::\n\n## Searchable Table\n\nThe table below contains links to each individual station page.\n\n::: column-body\n```{r}\n\n# transformed_scores %>%\n#   select(station, score) %>%\n#   reactable(theme = cyborg(),\n#             class = \"pageinforeactable\",\n#             columns = list(\n#               'station' = colDef(name = 'station'),\n#               'score' = colDef(name = \"Score\",\n#                              cell = data_bars(.,\n#                                               fill_color = 'white',\n#                                               background = 'opaque'))\n#             )\n#             \n#             )\n\n\n\n# readRDS('../r_objects/transformed_scores.Rdata') %>%\n#   as.data.frame() %>%\n#   mutate(across(where(is.numeric), ~round(.x, 2))) %>%\n#   rename(!!!translations) %>%\n#   reactable(theme = sandstone(),searchable = T, defaultSorted = \"Total Score\", defaultSortOrder = \"desc\", defaultPageSize = 10)\n\n\n df_with_links = readRDS('../r_objects/transformed_scores.Rdata')  %>%\n  as.data.frame() %>%\n  select(station) %>%\n  mutate(safe_name = gsub(\"[^a-zA-Z0-9]\", \"_\", station)) %>%\n  mutate(win_url = paste0('../stations/', safe_name, '.html')) %>%\n  select(-safe_name)\n\nreactable(df_with_links,\n          filterable = T,\n  columns = list(\n    station = colDef(\n      name = \"Station\",\n      cell = function(value, index) {\n        url <- df_with_links$win_url[index]\n        htmltools::a(href = url, value, target = \"_blank\")\n      }\n    ),\n    win_url = colDef(show = FALSE)  # Hide the URL column\n  )\n)\n\n```\n:::\n\n::: column-body\n## Exploring The Next 25\nScroll down to explore The Next 25 stations in-depth.\n\nIt will include a breakdown of how its score was formed, which uses the transformed scores discussed in the full report. These scores are bounded between zero and one.\n\nA table below shows a *rough* guide of how to interpret the transformed scores.\n\n| Transformed Value | Interpretation |\n|-------------------|----------------|\n| 0-0.35            | Poor           |\n| 0.35 - 0.6        | Low            |\n| 0.6 - 0.8         | Good           |\n| 0.8 - 1           | Excellent      |\n\nUse a laptop or desktop for the best viewing experience. (keep scrolling!)\n:::\n\n::: cr-section\n::: {focus-on=\"cr-map1\"}\n## [`r transformed_scores$station[1]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B1%5D),%20'.html')%60)\n\n###### Rank: 1\n\n###### Total Score: `r transformed_scores$score[1]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(1)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B1%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map2\"}\n## [`r transformed_scores$station[2]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B2%5D),%20'.html')%60)\n\n###### Rank: 2\n\n###### Total Score: `r transformed_scores$score[2]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(2)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B2%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map3\"}\n## [`r transformed_scores$station[3]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B3%5D),%20'.html')%60)\n\n###### Rank: 3\n\n###### Total Score: `r transformed_scores$score[3]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(3)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B3%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map4\"}\n## [`r transformed_scores$station[4]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B4%5D),%20'.html')%60)\n\n###### Rank: 4\n\n###### Total Score: `r transformed_scores$score[4]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(4)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B4%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map5\"}\n## [`r transformed_scores$station[5]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B5%5D),%20'.html')%60)\n\n###### Rank: 5\n\n###### Total Score: `r transformed_scores$score[5]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(5)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B5%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map6\"}\n## [`r transformed_scores$station[6]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B6%5D),%20'.html')%60)\n\n###### Rank: 6\n\n###### Total Score: `r transformed_scores$score[6]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(6)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B6%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map7\"}\n## [`r transformed_scores$station[7]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B7%5D),%20'.html')%60)\n\n###### Rank: 7\n\n###### Total Score: `r transformed_scores$score[7]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(7)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B7%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map8\"}\n## [`r transformed_scores$station[8]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B8%5D),%20'.html')%60)\n\n###### Rank: 8\n\n###### Total Score: `r transformed_scores$score[8]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(8)\n\n```\n\nSee more information [here](%60r%20paste0('stations/',san_station(transformed_scores$station%5B8%5D),'/quarto/',san_station(transformed_scores$station%5B8%5D),'.html')%20%60).\n:::\n\n::: {focus-on=\"cr-map9\"}\n## [`r transformed_scores$station[9]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B9%5D),%20'.html')%60)\n\n###### Rank: 9\n\n###### Total Score: `r transformed_scores$score[9]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(9)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B9%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map10\"}\n## [`r transformed_scores$station[10]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B10%5D),%20'.html')%60)\n\n###### Rank: 10\n\n###### Total Score: `r transformed_scores$score[10]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(10)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B10%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map11\"}\n## [`r transformed_scores$station[11]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B11%5D),%20'.html')%60)\n\n###### Rank: 11\n\n###### Total Score: `r transformed_scores$score[11]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(11)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B11%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map12\"}\n## [`r transformed_scores$station[12]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B12%5D),%20'.html')%60)\n\n###### Rank: 12\n\n###### Total Score: `r transformed_scores$score[1]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(12)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B12%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map13\"}\n## [`r transformed_scores$station[13]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B13%5D),%20'.html')%60)\n\n###### Rank: 13\n\n###### Total Score: `r transformed_scores$score[10]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(13)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B13%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map14\"}\n## [`r transformed_scores$station[14]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B14%5D),%20'.html')%60)\n\n###### Rank: 14\n\n###### Total Score: `r transformed_scores$score[14]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(14)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B14%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map15\"}\n## [`r transformed_scores$station[15]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B15%5D),%20'.html')%60)\n\n###### Rank: 15\n\n###### Total Score: `r transformed_scores$score[15]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(15)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B15%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map16\"}\n## [`r transformed_scores$station[16]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B16%5D),%20'.html')%60)\n\n###### Rank: 16\n\n###### Total Score: `r transformed_scores$score[16]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(16)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B16%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map17\"}\n## [`r transformed_scores$station[17]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B17%5D),%20'.html')%60)\n\n###### Rank: 17\n\n###### Total Score: `r transformed_scores$score[17]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(17)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B17%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map18\"}\n## [`r transformed_scores$station[18]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B18%5D),%20'.html')%60)\n\n###### Rank: 18\n\n###### Total Score: `r transformed_scores$score[18]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(18)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B18%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map19\"}\n## [`r transformed_scores$station[19]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B19%5D),%20'.html')%60)\n\n###### Rank: 19\n\n###### Total Score: `r transformed_scores$score[19]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(19)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B19%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map20\"}\n## [`r transformed_scores$station[20]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B20%5D),%20'.html')%60)\n\n###### Rank: 20\n\n###### Total Score: `r transformed_scores$score[20]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(20)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B20%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map21\"}\n## [`r transformed_scores$station[21]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B21%5D),%20'.html')%60)\n\n###### Rank: 21\n\n###### Total Score: `r transformed_scores$score[21]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(21)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B21%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map22\"}\n## [`r transformed_scores$station[22]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B22%5D),%20'.html')%60)\n\n###### Rank: 22\n\n###### Total Score: `r transformed_scores$score[22]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(22)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B22%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map23\"}\n## [`r transformed_scores$station[23]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B23%5D),%20'.html')%60)\n\n###### Rank: 23\n\n###### Total Score: `r transformed_scores$score[23]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(23)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B23%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map24\"}\n## [`r transformed_scores$station[24]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B24%5D),%20'.html')%60)\n\n###### Rank: 24\n\n###### Total Score: `r transformed_scores$score[24]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(24)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B24%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map25\"}\n## [`r transformed_scores$station[25]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B25%5D),%20'.html')%60)\n\n###### Rank: 25\n\n###### Total Score: `r transformed_scores$score[25]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(25)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B25%5D),%20'.html')%60).\n:::\n\n::: {#cr-main}\n:::\n\n::: {#cr-map1}\n:::\n\n::: {#cr-map2}\n:::\n\n::: {#cr-map3}\n:::\n\n::: {#cr-map4}\n:::\n\n::: {#cr-map5}\n:::\n\n::: {#cr-map6}\n:::\n\n::: {#cr-map7}\n:::\n\n::: {#cr-map8}\n:::\n\n::: {#cr-map9}\n:::\n\n::: {#cr-map10}\n:::\n\n::: {#cr-map11}\n:::\n\n::: {#cr-map12}\n:::\n\n::: {#cr-map13}\n:::\n\n::: {#cr-map14}\n:::\n\n::: {#cr-map15}\n:::\n\n::: {#cr-map16}\n:::\n\n::: {#cr-map17}\n:::\n\n::: {#cr-map18}\n:::\n\n::: {#cr-map19}\n:::\n\n::: {#cr-map20}\n:::\n\n::: {#cr-map21}\n:::\n\n::: {#cr-map22}\n:::\n\n::: {#cr-map23}\n:::\n\n::: {#cr-map24}\n:::\n\n::: {#cr-map25}\n:::\n:::\n","srcMarkdownNoYaml":"\n\n```{=html}\n<script>\nfunction modifyMainDiv() {\n  console.log('blue');\n  const mainDiv = document.getElementById('quarto-document-content');\n  if (mainDiv) {\n    console.log('found');\n    mainDiv.classList.remove('column-body');\n    mainDiv.classList.add('column-page-right');\n    // You can add more class modifications here\n  }\n}\n\n// This function will be called by the script in the Quarto document\nmodifyMainDiv();\n</script>\n```\n```{r, message=FALSE, warning=FALSE}\n\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(leaflet)\nlibrary(shiny)\nlibrary(htmlwidgets)\nlibrary(plotly)\nlibrary(reactablefmtr)\n\nlocations <- readRDS('../r_objects/locations.Rdata')\nsource('../r/constants.r')\n\nsource('../r/theme.r')\nsource('../r/graphs.r')\nsource('../r/prepare_index_page.r')\nsource('../r/transform.r')\nsource('../r/existing_upzoned_stations.r')\n\ntransformed_scores <- readRDS('../r_objects/transformed_scores.Rdata')\noriginal_values <- readRDS('../r_objects/station_rankings.Rdata')\n\n# combined_scores <- original_values %>%\n#   left_join(transformed_scores, by = 'station') %>%\n#   arrange(desc(score)) %>%\n#   slice_head(n = 10) %>%\n#   mutate(across(where(is.numeric), .fns = function(x) round(x, 2) )) %>%\n#   mutate(rank = row_number())\n\n\ntransformed_scores <- readRDS('../r_objects/transformed_scores.Rdata') %>%\n  remove_null_weighted_cols() %>%\n  as.data.frame() %>%\n  mutate(across(where(is.numeric), .fns = function(x) round(x, 2) )) %>%\n  mutate(rank = row_number()) \n\nsan_station <- function(x) {\n  return( str_replace(x, ' ', '_') )\n}\n\n# translations = c(\n#   'grz_nrz_pc' = 'Zoning suitability',\n#   'capacity_delta' = 'Potential new homes',\n#   'average_peak_service_freq' = 'Train frequency',\n#   'average_peak_service_cap' = 'Available train capacity',\n#   'walkability_score' = 'Local services',\n#   'distance' = 'Distance to CBD',\n#   'n_bus_tram' = 'Other transport infrastructure'\n# )\n\n# compact_data_bars <- function(data, fill_color = \"#00bfc4\", inside_color = \"white\", outside_color = \"black\", force_outside = FALSE, ...) {\n#   orig_formatter <- reactablefmtr::data_bars(data, fill_color = fill_color, force_outside = force_outside, ...)\n#   \n#   function(value, index, name) {\n#     bar <- orig_formatter(value, index, name)\n#     script <- sprintf(\"\n#       const b = this.querySelector('.bar-cell');\n#       if (b) {\n#         const t = b.querySelector('span');\n#         if (t) t.style.color = (b.querySelector('.bar').offsetWidth < b.offsetWidth && %s) ? '%s' : '%s';\n#       }\n#     \", !force_outside, inside_color, outside_color)\n#     \n#     tagList(bar, tags$script(HTML(script)))\n#   }\n# }\n\ntranslations <- translations <- gsub(\"\\\\s*\\\\([^)]+\\\\)\", \"\", translations)\n\n  transformed_scores = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    mutate(rank = row_number()) %>%\n    remove_null_weighted_cols() %>%\n    mutate(across(where(is.numeric), ~ round(.x, 2)))\n\nprintScores <- function(r) {\n  \n\n  transformed_scores %>% \n  filter(rank == r) %>%\n  pivot_longer(-station) %>%\n  select(-station) %>%\n  filter(!(name %in% c('score','rank'))) %>%\n  mutate(name = translations[name]) %>%\n  reactable(\n            class = \"pageinforeactable\",\n            columns = list(\n              'name' = colDef(name = 'Metric'),\n              'value' = colDef(name = \"Score\",\n                             cell = data_bars(.,\n                                              text_position = 'above',\n                                              fill_color = '#1B5E20',\n                                              text_color = 'black',\n                                              background = 'opaque',\n                                              fill_opacity = 1,\n                                              bar_height = 24,\n                                              bold_text = T))\n            )\n            \n            ) %>%\n  return()\n  \n}\n\n```\n\n# The Next 25: Executive Summary\n\n::: column-body\nAs part of Plan for Victoria, the Government has elected to upzone dozens of train stations as part of the Activity Centres Program. This is a sound policy. Melbourne has bountiful infrastructure and the ability to accommodate many more Melburnians in the places where they want to live. We have outlined the impetus for transit-oriented planning reform in our previous reports including [Melbourne's Missing Middle](https://www.yimby.melbourne/missing-middle) and [Missing Middle Housing Targets](https://targets.yimby.melbourne/).\n\n::: column-margin\nSidenote: A total of 60 Activity Centres have been announced. Of the initial 10, seven are focused around train stations. Of the 25 announced in October 2024, one tram stop (Toorak Village) was included. The total number of train stations confirmed for upzoning to date, therefore, is 31. Should the yet-to-be-announced Activity Centres all be train stations, as this report assumes, that would bring the total up to 56.\n:::\n\nHere, we build upon previous work to answer a simple question: across Melbourne's transport network, which additional 25 train stations should be prioritised for inclusion in the Activity Centre Program?\n\n*See the full report [here](report.html \"Full Report\").*\n:::\n\n<!-- ### Methodology -->\n\n<!-- \\ -->\n\n<!-- For each train station, metrics are calculated on: -->\n\n<!-- -   Zoning suitability (% land area) -->\n\n<!-- -   Potential number of new homes (# homes) -->\n\n<!-- -   Train service frequency in peak (trains per hour) -->\n\n<!-- -   Spare train line capacity in peak (# passengers) -->\n\n<!-- -   Local amenities nearby (composite index) -->\n\n<!-- -   Proximity to CBD (metres) -->\n\n<!-- -   Bus and tram frequencies (services per hour) -->\n\n<!-- Each metric calculated uses different units of measurement, and need to be transformed into comparable units so that a single score can be generated for each train station. -->\n\n<!-- This report uses xmin-xmax scaling, which transforms each 'raw' metric into a value between zero and one. If a station receives a 'transformed' score of zero, it corresponds to the lowest value out of all stations. Likewise, a value of one represents the best out of all stations in Melbourne. -->\n\n<!-- These 'transformed' scores are summed together to produce a final score for each station. -->\n\n<!-- ::: callout-note -->\n\n<!-- There are some restrictions placed on final rankings: -->\n\n<!-- -   City loop stations are excluded as they can't be upzoned further. -->\n\n<!-- -   Edge transfer stations (North Melbourne, South Yarra, Richmond) were excluded due to extreme outliers in the data impacting the transformation process. -->\n\n<!-- -   Stations further than 25km of Flinders Street are excluded as they are generally economically unfeasible to upzone. -->\n\n<!-- The full methodology is contained in the full report. -->\n\n<!-- \\ -->\n\n<!-- **`r transformed_scores %>% filter(rank == 1) %>% pull(station)`** was the best station out of those considered in this project. -->\n\n<!-- There is a searchable table and interactive map at the foot of this document to find your own station and see where it ranks. -->\n\n<!-- A chart below shows the scores of the 10 highest ranked stations, with an interactive map underneath to show the spatial distribution. -->\n\n::: column-body\n<!-- ## Map -->\n\n::: interactive-map\n```{r}\n\n\n#| fig-height: 4\njs_code <- \"\nfunction(el, x, data) {\n\n  var map = this;\n\n  function updateLabelVisibility() {\n   \n    var currentZoom = map.getZoom();\n   \n    var showLabelsZoomLevel = 13;\n\n    var labels = document.getElementsByClassName('top-25-labels');\n   \n    for (var i = 0; i < labels.length; i++) {\n      if (currentZoom >= showLabelsZoomLevel) {\n        labels[i].style.display = 'block';\n      } else {\n        labels[i].style.display = 'none';\n      }\n    }\n  }\n  \n\n\n  // Ensure the map is fully loaded before adding the event listener\n  map.whenReady(function() {\n  \n\n    map.on('zoomend', function() {\n  \n      updateLabelVisibility();\n    });\n    \n    // Initial call to set correct visibility\n    updateLabelVisibility();\n  });\n}\n\n\"\n\n\nm <- prepare_index(returnTopTen = T, topN = 25, fromQuarto = T, font_size_q = '8pt', h = '600px', w = '100%', fillC = \"white\", ringC = \"#283696\") %>%\n  htmlwidgets::onRender(js_code)\n\nm\n\n```\n:::\n\n<!-- ## Chart -->\n\n```{r}\n#| fig-height: 8\n\ntemp_graph <- readRDS('../r_objects/transformed_scores.Rdata') %>% \n    as.data.frame() %>%\n    select(station, score) %>%\n    arrange(desc(score)) %>%\n    mutate(score = round(score, 2)) %>%\n    slice_head(n = 25) %>%\n    ggplot(mapping = aes(y = reorder(station, score), x = score, fill = score )) +\n    scale_fill_gradientn(colors = create_green_palette(11)) +\n    geom_col() +\n    ylab(\"Station\") +\n    theme_report() + \n  theme(legend.position = \"none\")\n  \n  ggplotly(temp_graph) %>% plotly::layout(showlegend = F)\n\n```\n\nOf the `r nrow(transformed_scores)` Melbourne stations within 25 kilometres of the CBD and not yet included within the Activity Centre Program, these 25 are the most suitable for upzoning.\n\nEach station in the network has been given a score based on a set of parameters. The higher a station's score, the greater reason there is to upzone around it. Scores range between `r transformed_scores$score[1]` for `r transformed_scores$station[1]` and `r transformed_scores$score[nrow(transformed_scores)]` for `r transformed_scores$station[nrow(transformed_scores)]`.\n\nFor each station, and all land within one kilometre of that station, we measure:\n\n-   The number of trains per hour during peak travel times\n-   The amount of spare train capacity during peak travel times\n-   The frequency of nearby bus and tram services\n-   The proportion of residential land with low-density zoning, excluding heritage overlays\n-   The prevalence and diversity of local amenities such as parks and schools\n-   The station's distance from the CBD\n\nA comprehensive explanation of the report's methodology is available [here](report_shiny.html).\n\n<!-- Note: our rankings exclude SRL Precincts and stations located within the CBD such as List -->\n\n::: {.callout-caution collapse=\"true\"}\n## Excluded Stations and SRL Precincts\n\nWe also exclude SRL precincts and stations in the CBD.\n\nThese are: `r c(other_existing_precincts, city_loop_stations)`\n:::\n\n::: {.column-body}\n\n## Melbourne's three outlier 'Edge Stations'\n \n\nThree outlier stations---North Melbourne, Richmond, and South Yarra---are excluded from our main rankings. These Edge Stations are outliers due to their extremely high rail service frequency, which dwarfs the rest of the dataset.\n\nAs such, we consider these three stations separately. By nature of their serviceability and location, these three inner-city stations are ripe for upzoning.\n\nIf the Government is only going to upzone 50 more stations in total---though we see no reason to stop at 50---we suggest prioritising the Edge Stations and then 22 of the 25 listed above. A full ranking of Melbourne's entire rail network is provided later on this page for reference.\n\n## Results by LGA\n\nThe stations best-suited for upzoning are not equally distributed across Melbourne's local councils. This makes sense: land and infrastructure is also not equally distributed across councils. The model in this report reflects Melbourne as it is: a dynamic, vibrant city, in which some geographic areas are more suitable for upzoning than others.\n\nValuable inner-city land close to services, jobs, and amenities will always score higher when measuring the city as a whole rather than within the arbitrary segments of local government areas. For more on the importance of measuring the entirety of Melbourne, you can read our submission to the Inquiry into Local Government funding and services, and the Abundant Housing Network Australia's submission to the National Urban Policy.\n\nBelow, we chart the distribution of our 25 additional stations suitable for upzoning.\n:::\n\n::: column-body\n```{r}\n\ntop_stations_by_lga(debug =  F) \n\n```\n:::\n\nNext, we take into account the current confirmed stations---those included in the Activity Centre Program pilot and the announced 25---alongside the top 25 additional stations returned by our model.\n\n::: column-body\n```{r}\n\ntop_stations_by_lga(include_existing_25 = T) \n\n```\n:::\n\nThe 56 train stations selected for upzoning represent areas with strong housing targets as calculated through econometric modelling within our [Housing Targets](https://targets.yimby.melbourne/) report, released earlier this year.\n\n![](index_images/targets.png.png)\n\nWhat these models together make clear is that the 56 selected stations are not just in areas suitable for people to live---they are in areas where people want to live. We know this because apartments in many of these areas trade at a premium---indicating a shortfall of supply relative to demand.\n\n## Results by train line\n\nBelow, we once again chart the distribution of the top 25 additional stations suitable for upzoning, followed by the distribution of all 56 stations.\n\n```{r}\n\n\n  station_lines = readRDS('../r_objects/stations_with_lines.Rdata') \n  \n  transformed_scores_ = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    rename(Station_Name = \"station\") %>%\n    arrange(desc(score)) %>%\n    mutate(rank = row_number())\n  \n  score_by_line <- (transformed_scores_ %>%\n    left_join(station_lines, by = 'Station_Name') %>%\n    slice_head(n = 25) %>%\n    select(Station_Name, rank, lines) %>%\n    unnest(lines) %>%\n    count(lines, sort = T) %>%\n    filter(lines != \"Richmond and City Loop\") %>%\n    rename(line = 'lines') %>%\n    left_join(line_groups, by = 'line') %>%\n    ggplot(., mapping = aes(x = reorder(line, -n) , y = n)) +\n    theme_report() +\n    theme(legend.position = 'top') +\n    geom_col(aes(fill = group)) +\n    scale_fill_manual(values = setNames(colours$colour, colours$group)) +\n    guides(x = guide_axis(angle = 45)) +\n    xlab(\"Train Line\") +\n    ylab(paste0(\"Number of stops in top \", 25 )) ) %>%\n    ggplotly() %>%\n    layout(xaxis = list(tickangle = -45)) %>%\n    layout(legend = list(\n      orientation = \"h\",    # horizontal orientation\n      y = 1.1,             # position above plot\n      x = 0.5,             # centered\n      xanchor = \"center\"   # anchor point for centering\n    ))\n  \n  \n  score_by_line\n\n```\n\n```{r}\n\nstation_lines = readRDS('../r_objects/stations_with_lines.Rdata') \n\n  already_upzoned_stations = data.frame(Station_Name = existing_upzoned_stations) %>%\n    filter(Station_Name != \"Toorak Village\")\n  \n  stations_for_lines = readRDS('../r_objects/transformed_scores.Rdata') %>%\n    as.data.frame() %>%\n    rename(Station_Name = \"station\") %>%\n    arrange(desc(score)) %>%\n    slice_head(n = 25) %>%\n    select(Station_Name) %>%\n    bind_rows(., already_upzoned_stations)\n    \n  score_by_line <- (stations_for_lines %>%\n    left_join(station_lines, by = 'Station_Name') %>%\n    select(Station_Name, lines) %>%\n    unnest(lines) %>%\n    count(lines, sort = T) %>%\n    filter(lines != \"Richmond and City Loop\") %>%\n    rename(line = 'lines') %>%\n    left_join(line_groups, by = 'line') %>%\n    ggplot(., mapping = aes(x = reorder(line, -n) , y = n)) +\n    theme_report() +\n    theme(legend.position = 'top') +\n    geom_col(aes(fill = group)) +\n    scale_fill_manual(values = setNames(colours$colour, colours$group)) +\n    guides(x = guide_axis(angle = 45)) +\n    xlab(\"Train Line\") +\n    ylab(paste0(\"Number of stops in top 25 + Already Upzoned\")) ) %>%\n    ggplotly() %>%\n    layout(xaxis = list(tickangle = -45)) %>%\n    layout(legend = list(\n      orientation = \"h\",    # horizontal orientation\n      y = 1.1,             # position above plot\n      x = 0.5,             # centered\n      xanchor = \"center\"   # anchor point for centering\n    ))\n  \n  \n  score_by_line\n\n```\n\n## Upzoning into Melbourne's vibrant future\n\nA final point we wish to highlight in this report is that the 56 stations above are by no means an exhaustive list of upzoning options.\n\nOur model indicates no significant difference between the upzoning capacities of stations number 25 and 75. Indeed, there is no reason the Activity Centre Program could not be doubled in scope---from 50 to 100 stations---in the near future.\n\n```{r}\n\n\ntotal_stations <- nrow(transformed_scores)\ntick_positions <- seq(25, total_stations, by = 25)\n\np <- ggplot() +\n  annotate(\"rect\", xmin = 0, xmax = 25, ymin = -0.5, ymax = max(transformed_scores$score) + 0.5,\n              fill = \"#8FC49A\",  alpha = 0.34) +\n  geom_vline(xintercept = 25, linetype = \"dashed\") + \n  geom_point(data = transformed_scores, mapping = aes(y = score, x = rank), fill = \"#283696\", size = 0.9  ) +\n  xlab(\"Station Rank\") +\n  ylab(\"Scores ordered descending\") +\n  scale_x_continuous(\n    breaks = tick_positions,\n    labels = tick_positions,\n    expand = c(0.01, 0)\n  ) +\n  theme_report() +\n  coord_cartesian(ylim = c(0, max(transformed_scores$score)))\n\nggplotly(p)\n\n```\n\n\n\nThis report provides the evidence base required for the Government to confidently scale their planning reform policy ambitions as we move our state forward.\n\nThe great strength of upzoning is that it is low-cost and future-focused. It enables our city to remain dynamic and open. It lets communities grow and change over time, and it breathes life into our streets and the buildings that line them. It champions small business, vibrancy, and dynamism---it reminds us that our city is not a dusty museum, but a place where people come and choose to live.\n\nYou can explore the full network and see how your station scores via the map and table below.\n\n## Searchable Map\n\nPages for each individual train station have also been produced to detail how each performed in the metrics.\n\nThe map below is interactive and clickable. Scroll and find any train station and click the label for further information.\n\n::: column-body\n```{r}\n\n\njs_code <- \"\nfunction(el, x, data) {\n\n    var marker = document.getElementsByClassName('my-labels');\n  for(var i=0; i < marker.length; i++){\n    (function(){\n      console.log('hello');\n      var v = data.win_url[i];\n      marker[i].addEventListener('click', function() { window.open(v);}, false);\n  }()); \n  }\n\n  var map = this;\n  \n  \n  \n  \n\n  function updateLabelVisibility() {\n   \n    var currentZoom = map.getZoom();\n   \n    var showLabelsZoomLevel = 13;\n\n    var labels = document.getElementsByClassName('my-labels');\n   \n    for (var i = 0; i < labels.length; i++) {\n      if (currentZoom >= showLabelsZoomLevel) {\n        labels[i].style.display = 'block';\n      } else {\n        labels[i].style.display = 'none';\n      }\n    }\n  }\n  \n\n\n  // Ensure the map is fully loaded before adding the event listener\n  map.whenReady(function() {\n  \n  \n \n    map.on('zoomend', function() {\n  \n      updateLabelVisibility();\n    });\n    \n    // Initial call to set correct visibility\n    updateLabelVisibility();\n  });\n}\n\n\"\n\ncolours = tribble(\n  ~group, ~ colour,\n  'Sandringham' , \"#F178AF\",\n  'CrossCity' , \"#028430\",\n  'Cran/Pak' , \"#279FD5\",\n  \"Burnley\" , \"#152C6B\",\n  \"Northern\" , \"#FFBE00\",\n  \"Eastern\" , \"#BE1014\",\n  'event' , \"#95979A\"\n)\n\nlines_dissolved <- read_sf('../shapefiles/qgis/final_map.shp') %>%\n  left_join(colours, by = 'group') \n\nvalid_stations <-  readRDS('../r_objects/transformed_scores.Rdata') %>%\n  pull(station)\n\nlocations = locations %>%\n  filter(Station_Name %in% valid_stations) %>%\n  mutate(safe_name = gsub(\"[^a-zA-Z0-9]\", \"_\", Station_Name)) %>%\n  mutate(message = \n           paste0(\n             '<div style = \\\" background-color: black; \\\">',\n             \"<p style = \\\" color: white; text-align:center ; padding: 5px; \\\" >\", Station_Name, '</p>',\n             '</div>'\n             \n           )\n  ) %>%\n  mutate(win_url = paste0('../stations/', safe_name, '.html'))\n\nm <- leaflet(width = '100%', height = '600px') %>%\n  leaflet::setView(lng = 144.9668, lat = -37.8181, zoom = 12) %>%\n  addPolylines(data = lines_dissolved, color = ~colour, opacity = 0.8) %>%\n  addTiles('https://tiles.stadiamaps.com/tiles/stamen_toner_background/{z}/{x}/{y}.png?api_key=090a847c-32a2-4e35-99a9-543ad8f4ecc8', options = tileOptions(opacity = 0.3)) %>%\n  addCircleMarkers(lng = locations$lng, lat=locations$lat, radius = 5, color = 'black', fillColor = 'black', fillOpacity = 1, opacity = 0.7) %>%\n  addLabelOnlyMarkers(lng = locations$lng,\n                      lat = locations$lat,\n                      label = lapply(locations$message, htmltools::HTML),\n                      labelOptions = labelOptions(noHide = T, clickable = T,  className = 'my-labels', direction = 'auto', textOnly = T, textsize = '10pt',\n                                                  style = list(\n                                                    'font-weight' = '800',\n                                                    'text-decoration' = 'underline',\n                                                    'text-decoration-color' = 'white',\n                                                    'margin' = '5px',\n                                                    'letter-spacing' = '0.5px'\n                                                  ))) %>%\n  htmlwidgets::onRender(js_code, data = locations)\n\nm\n\n```\n:::\n\n## Searchable Table\n\nThe table below contains links to each individual station page.\n\n::: column-body\n```{r}\n\n# transformed_scores %>%\n#   select(station, score) %>%\n#   reactable(theme = cyborg(),\n#             class = \"pageinforeactable\",\n#             columns = list(\n#               'station' = colDef(name = 'station'),\n#               'score' = colDef(name = \"Score\",\n#                              cell = data_bars(.,\n#                                               fill_color = 'white',\n#                                               background = 'opaque'))\n#             )\n#             \n#             )\n\n\n\n# readRDS('../r_objects/transformed_scores.Rdata') %>%\n#   as.data.frame() %>%\n#   mutate(across(where(is.numeric), ~round(.x, 2))) %>%\n#   rename(!!!translations) %>%\n#   reactable(theme = sandstone(),searchable = T, defaultSorted = \"Total Score\", defaultSortOrder = \"desc\", defaultPageSize = 10)\n\n\n df_with_links = readRDS('../r_objects/transformed_scores.Rdata')  %>%\n  as.data.frame() %>%\n  select(station) %>%\n  mutate(safe_name = gsub(\"[^a-zA-Z0-9]\", \"_\", station)) %>%\n  mutate(win_url = paste0('../stations/', safe_name, '.html')) %>%\n  select(-safe_name)\n\nreactable(df_with_links,\n          filterable = T,\n  columns = list(\n    station = colDef(\n      name = \"Station\",\n      cell = function(value, index) {\n        url <- df_with_links$win_url[index]\n        htmltools::a(href = url, value, target = \"_blank\")\n      }\n    ),\n    win_url = colDef(show = FALSE)  # Hide the URL column\n  )\n)\n\n```\n:::\n\n::: column-body\n## Exploring The Next 25\nScroll down to explore The Next 25 stations in-depth.\n\nIt will include a breakdown of how its score was formed, which uses the transformed scores discussed in the full report. These scores are bounded between zero and one.\n\nA table below shows a *rough* guide of how to interpret the transformed scores.\n\n| Transformed Value | Interpretation |\n|-------------------|----------------|\n| 0-0.35            | Poor           |\n| 0.35 - 0.6        | Low            |\n| 0.6 - 0.8         | Good           |\n| 0.8 - 1           | Excellent      |\n\nUse a laptop or desktop for the best viewing experience. (keep scrolling!)\n:::\n\n::: cr-section\n::: {focus-on=\"cr-map1\"}\n## [`r transformed_scores$station[1]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B1%5D),%20'.html')%60)\n\n###### Rank: 1\n\n###### Total Score: `r transformed_scores$score[1]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(1)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B1%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map2\"}\n## [`r transformed_scores$station[2]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B2%5D),%20'.html')%60)\n\n###### Rank: 2\n\n###### Total Score: `r transformed_scores$score[2]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(2)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B2%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map3\"}\n## [`r transformed_scores$station[3]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B3%5D),%20'.html')%60)\n\n###### Rank: 3\n\n###### Total Score: `r transformed_scores$score[3]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(3)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B3%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map4\"}\n## [`r transformed_scores$station[4]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B4%5D),%20'.html')%60)\n\n###### Rank: 4\n\n###### Total Score: `r transformed_scores$score[4]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(4)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B4%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map5\"}\n## [`r transformed_scores$station[5]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B5%5D),%20'.html')%60)\n\n###### Rank: 5\n\n###### Total Score: `r transformed_scores$score[5]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(5)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B5%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map6\"}\n## [`r transformed_scores$station[6]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B6%5D),%20'.html')%60)\n\n###### Rank: 6\n\n###### Total Score: `r transformed_scores$score[6]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(6)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B6%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map7\"}\n## [`r transformed_scores$station[7]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B7%5D),%20'.html')%60)\n\n###### Rank: 7\n\n###### Total Score: `r transformed_scores$score[7]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(7)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B7%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map8\"}\n## [`r transformed_scores$station[8]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B8%5D),%20'.html')%60)\n\n###### Rank: 8\n\n###### Total Score: `r transformed_scores$score[8]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(8)\n\n```\n\nSee more information [here](%60r%20paste0('stations/',san_station(transformed_scores$station%5B8%5D),'/quarto/',san_station(transformed_scores$station%5B8%5D),'.html')%20%60).\n:::\n\n::: {focus-on=\"cr-map9\"}\n## [`r transformed_scores$station[9]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B9%5D),%20'.html')%60)\n\n###### Rank: 9\n\n###### Total Score: `r transformed_scores$score[9]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(9)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B9%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map10\"}\n## [`r transformed_scores$station[10]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B10%5D),%20'.html')%60)\n\n###### Rank: 10\n\n###### Total Score: `r transformed_scores$score[10]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(10)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B10%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map11\"}\n## [`r transformed_scores$station[11]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B11%5D),%20'.html')%60)\n\n###### Rank: 11\n\n###### Total Score: `r transformed_scores$score[11]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(11)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B11%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map12\"}\n## [`r transformed_scores$station[12]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B12%5D),%20'.html')%60)\n\n###### Rank: 12\n\n###### Total Score: `r transformed_scores$score[1]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(12)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B12%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map13\"}\n## [`r transformed_scores$station[13]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B13%5D),%20'.html')%60)\n\n###### Rank: 13\n\n###### Total Score: `r transformed_scores$score[10]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(13)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B13%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map14\"}\n## [`r transformed_scores$station[14]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B14%5D),%20'.html')%60)\n\n###### Rank: 14\n\n###### Total Score: `r transformed_scores$score[14]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(14)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B14%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map15\"}\n## [`r transformed_scores$station[15]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B15%5D),%20'.html')%60)\n\n###### Rank: 15\n\n###### Total Score: `r transformed_scores$score[15]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(15)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B15%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map16\"}\n## [`r transformed_scores$station[16]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B16%5D),%20'.html')%60)\n\n###### Rank: 16\n\n###### Total Score: `r transformed_scores$score[16]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(16)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B16%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map17\"}\n## [`r transformed_scores$station[17]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B17%5D),%20'.html')%60)\n\n###### Rank: 17\n\n###### Total Score: `r transformed_scores$score[17]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(17)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B17%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map18\"}\n## [`r transformed_scores$station[18]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B18%5D),%20'.html')%60)\n\n###### Rank: 18\n\n###### Total Score: `r transformed_scores$score[18]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(18)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B18%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map19\"}\n## [`r transformed_scores$station[19]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B19%5D),%20'.html')%60)\n\n###### Rank: 19\n\n###### Total Score: `r transformed_scores$score[19]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(19)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B19%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map20\"}\n## [`r transformed_scores$station[20]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B20%5D),%20'.html')%60)\n\n###### Rank: 20\n\n###### Total Score: `r transformed_scores$score[20]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(20)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B20%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map21\"}\n## [`r transformed_scores$station[21]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B21%5D),%20'.html')%60)\n\n###### Rank: 21\n\n###### Total Score: `r transformed_scores$score[21]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(21)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B21%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map22\"}\n## [`r transformed_scores$station[22]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B22%5D),%20'.html')%60)\n\n###### Rank: 22\n\n###### Total Score: `r transformed_scores$score[22]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(22)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B22%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map23\"}\n## [`r transformed_scores$station[23]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B23%5D),%20'.html')%60)\n\n###### Rank: 23\n\n###### Total Score: `r transformed_scores$score[23]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(23)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B23%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map24\"}\n## [`r transformed_scores$station[24]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B24%5D),%20'.html')%60)\n\n###### Rank: 24\n\n###### Total Score: `r transformed_scores$score[24]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(24)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B24%5D),%20'.html')%60).\n:::\n\n::: {focus-on=\"cr-map25\"}\n## [`r transformed_scores$station[25]`](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B25%5D),%20'.html')%60)\n\n###### Rank: 25\n\n###### Total Score: `r transformed_scores$score[25]` / `r sum(weights)`\n\n\\\n\n```{r}\n\nprintScores(25)\n\n```\n\nSee more information [here](%60r%20paste0('../',%22stations/%22,san_station(transformed_scores$station%5B25%5D),%20'.html')%60).\n:::\n\n::: {#cr-main}\n:::\n\n::: {#cr-map1}\n:::\n\n::: {#cr-map2}\n:::\n\n::: {#cr-map3}\n:::\n\n::: {#cr-map4}\n:::\n\n::: {#cr-map5}\n:::\n\n::: {#cr-map6}\n:::\n\n::: {#cr-map7}\n:::\n\n::: {#cr-map8}\n:::\n\n::: {#cr-map9}\n:::\n\n::: {#cr-map10}\n:::\n\n::: {#cr-map11}\n:::\n\n::: {#cr-map12}\n:::\n\n::: {#cr-map13}\n:::\n\n::: {#cr-map14}\n:::\n\n::: {#cr-map15}\n:::\n\n::: {#cr-map16}\n:::\n\n::: {#cr-map17}\n:::\n\n::: {#cr-map18}\n:::\n\n::: {#cr-map19}\n:::\n\n::: {#cr-map20}\n:::\n\n::: {#cr-map21}\n:::\n\n::: {#cr-map22}\n:::\n\n::: {#cr-map23}\n:::\n\n::: {#cr-map24}\n:::\n\n::: {#cr-map25}\n:::\n:::\n"},"formats":{"closeread-html":{"identifier":{"display-name":"HTML","target-format":"closeread-html","base-format":"html","extension-name":"closeread"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true,"shortcodes":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["D:\\train_capacity\\_extensions\\qmd-lab\\closeread\\closeread.lua"],"css":["../_extensions/qmd-lab/closeread/closeread.css","index.css","nav_fixes.css"],"toc":true,"toc-depth":3,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","page-layout":"article","revealjs-plugins":[],"toc-location":"left","toc-expand":true,"grid":{"body-width":"900px"},"theme":"zephr","remove-header-space":false,"image":"index_images/main.png","cr-section":{"layout":"overlay-left"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["closeread-html"]}